Windows + VS Code quickstart
============================

Prerequisites
-------------
1. Install **Python 3.11** from https://www.python.org/downloads/windows/ (tick "Add python.exe to PATH").
2. Install **Git for Windows** from https://git-scm.com/download/win.
3. Install **VS Code** from https://code.visualstudio.com/ and add the "Python" + "GitHub Copilot" (optional) extensions.
4. Place the dataset CSVs you mentioned in an easy-to-find folder, e.g. leave them at:
   * `C:\Users\user\Downloads\IDS_mapping.csv`
   * `C:\Users\user\Downloads\diabetic_data.csv`

Clone & open the repo
---------------------
1. Open **Command Prompt** and run:
   ```bat
   cd %USERPROFILE%\Documents
   git clone https://github.com/<your-org>/federated_health_app.git
   cd federated_health_app
   ```
2. Launch VS Code pointing to this folder:
   ```bat
   code .
   ```
3. When prompted in VS Code, create a Python virtual environment (or run `python -m venv .venv` then ` .venv\Scripts\activate`).

Install dependencies
--------------------
```bat
pip install --upgrade pip
pip install -r requirements.txt
```

Run the Streamlit app locally
-----------------------------
1. In VS Code, open a new terminal (``Ctrl+` ``).
2. Activate the virtual environment if it is not active:
   ```bat
   .venv\Scripts\activate
   ```
3. Start the dashboard:
   ```bat
   streamlit run app/Home.py
   ```
4. Open the browser tab that Streamlit prints (usually http://localhost:8501).

Train the Random-Forest model on Windows
---------------------------------------
1. Ensure the CSVs live where the training script can see them. If they are still in Downloads, pass the absolute paths when training.
2. From the repo root in the activated virtual environment, run:
   ```bat
   python -m training.train_pipeline ^
       --input "C:\Users\user\Downloads\diabetic_data.csv" ^
       --output models\rf_run ^
       --readmission-target readmitted_30d ^
       --los-target length_of_stay ^
       --medication-target medication_change ^
       --diagnosis-target diagnosis_group
   ```
   * Adjust the target column names if your CSV headers differ.
   * The script automatically saves `multi_pipeline.pkl`, `feature_medians.json`, and `meta.json` under the `models\rf_run` folder.
3. (Optional) If you need to merge `IDS_mapping.csv` to enrich categorical descriptions before training, prepare a new CSV with that merge logic in pandas, then feed the resulting file as `--input`.

Use the trained artefacts inside VS Code
----------------------------------------
1. Copy the generated files in `models\rf_run` into the app's `models` folder if you want the Streamlit app to pick them up by default.
2. Restart the Streamlit app (``Ctrl+C`` then re-run the command above). The UI will now load your Random-Forest pipeline.

Troubleshooting tips
--------------------
* If VS Code cannot find Python, set the interpreter via `Ctrl+Shift+P -> Python: Select Interpreter -> .venv`.
* Long file paths on Windows may need quoting (`"C:\\Users\\user\\Downloads\\diabetic_data.csv"`).
* When training on large CSVs, consider running `python -m training.train_pipeline --help` to see additional flags such as `--test-size` and `--random-state`.
